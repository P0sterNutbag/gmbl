[gd_scene load_steps=15 format=3 uid="uid://vaa87ae2qq6g"]

[ext_resource type="Script" uid="uid://cii8so5a7ygi4" path="res://Scripts/Overworld/overworld.gd" id="1_auytq"]
[ext_resource type="PackedScene" uid="uid://chqydw4q66jmg" path="res://Scenes/Environment/world_environment.tscn" id="2_2ngsa"]
[ext_resource type="Shader" uid="uid://bsvijaud8ak2w" path="res://Art/Shaders/wireframe.gdshader" id="2_c0h7r"]
[ext_resource type="PackedScene" uid="uid://cl4glsi76vapy" path="res://Scenes/player_overworld.tscn" id="2_i8gr5"]
[ext_resource type="Texture2D" uid="uid://cyshvj2iqviq6" path="res://Art/Textures/sand2.png" id="4_c0h7r"]
[ext_resource type="PackedScene" uid="uid://dhc6a3k8wyk4x" path="res://Scenes/Overworld/enemy.tscn" id="5_rmeny"]
[ext_resource type="PackedScene" uid="uid://cwly5u588dos3" path="res://Scenes/Places/encounter.tscn" id="6_hf0oe"]
[ext_resource type="Script" uid="uid://dr73ivowve6xe" path="res://Scripts/Overworld/ui.gd" id="6_rmeny"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_t2t4p"]
render_priority = 0
shader = ExtResource("2_c0h7r")
shader_parameter/depth_edge_threshold_lower = 0.37
shader_parameter/depth_edge_threshold_upper = 1.0
shader_parameter/normal_edge_threshold = 0.5
shader_parameter/line_color = Color(0, 0, 0, 1)
shader_parameter/line_width = 1.0

[sub_resource type="QuadMesh" id="QuadMesh_v1c68"]
material = SubResource("ShaderMaterial_t2t4p")
flip_faces = true
size = Vector2(2, 2)

[sub_resource type="NavigationMesh" id="NavigationMesh_2ngsa"]
vertices = PackedVector3Array(-99.5, 0.5, -99.5, -99.5, 0.5, 99.5, 99.5, 0.5, 99.5, 99.5, 0.5, -99.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_g6h2j"]
albedo_texture = ExtResource("4_c0h7r")
uv1_triplanar = true
texture_filter = 2

[sub_resource type="PlaneMesh" id="PlaneMesh_2ngsa"]
material = SubResource("StandardMaterial3D_g6h2j")
size = Vector2(1000, 1000)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_auytq"]
data = PackedVector3Array(100, 0, 100, -100, 0, 100, 100, 0, -100, -100, 0, 100, -100, 0, -100, 100, 0, -100)

[node name="Overworld" type="Node3D"]
script = ExtResource("1_auytq")

[node name="WorldEnvironment" parent="." instance=ExtResource("2_2ngsa")]

[node name="Shader" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.492066, 0, 0)
cast_shadow = 0
extra_cull_margin = 16237.3
mesh = SubResource("QuadMesh_v1c68")

[node name="CharacterBody3D" parent="." instance=ExtResource("2_i8gr5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00350237, 0.0046422, 0.0784659)
collision_layer = 32

[node name="AK47" parent="CharacterBody3D/EnemyModel/PersonAnimated/Armature/Skeleton3D/RightHand/Node3D" index="0"]
transform = Transform3D(-90.7144, 91.2145, 77.141, -43.5925, 64.9066, -128.01, -111.223, -99.8344, -12.7446, 0, 0, 0)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_2ngsa")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D"]
mesh = SubResource("PlaneMesh_2ngsa")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_auytq")

[node name="Enemy" parent="." instance=ExtResource("5_rmeny")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0190281, -11.745)

[node name="Area3D" parent="Enemy" index="1"]
encounter_scene = ExtResource("6_hf0oe")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
script = ExtResource("6_rmeny")

[node name="EncounterInfo" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Label" type="Label" parent="CanvasLayer/EncounterInfo"]
layout_mode = 0
offset_right = 119.0
offset_bottom = 23.0
text = "Engage Enemy?"

[node name="Label2" type="Label" parent="CanvasLayer/EncounterInfo"]
layout_mode = 0
offset_top = 28.0
offset_right = 40.0
offset_bottom = 51.0
text = "Distance:"

[node name="Label3" type="Label" parent="CanvasLayer/EncounterInfo"]
layout_mode = 0
offset_top = 54.0
offset_right = 72.0
offset_bottom = 77.0
text = "Danger: Low"

[editable path="CharacterBody3D"]
[editable path="CharacterBody3D/EnemyModel"]
[editable path="CharacterBody3D/EnemyModel/PersonAnimated"]
[editable path="Enemy"]
