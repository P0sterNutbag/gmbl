[gd_scene load_steps=27 format=3 uid="uid://dp33y25ncdla5"]

[ext_resource type="Script" uid="uid://cl7b5tsk5cpy3" path="res://Scripts/ui.gd" id="2_adtv2"]
[ext_resource type="PackedScene" uid="uid://c055smn111au7" path="res://Scenes/player.tscn" id="2_evir0"]
[ext_resource type="Texture2D" uid="uid://dl55u8tb3x34h" path="res://Art/Sprites/crosshair007.png" id="2_rmtha"]
[ext_resource type="Texture2D" uid="uid://hkv1jj2wvtml" path="res://Art/Textures/crosshair_point.png" id="4_k7acu"]
[ext_resource type="Texture2D" uid="uid://c5vubp6usyq24" path="res://Art/Textures/sand.png" id="5_5v1tr"]
[ext_resource type="Texture2D" uid="uid://b7o6p645d7r1q" path="res://Art/Textures/scope.png" id="5_ikia7"]
[ext_resource type="PackedScene" uid="uid://p1limlnykapp" path="res://Scenes/noise_controller.tscn" id="6_5ukr8"]
[ext_resource type="PackedScene" uid="uid://wfbh2lfg703p" path="res://Scenes/ladder.tscn" id="7_e0ngr"]
[ext_resource type="PackedScene" uid="uid://p3p6qwcwj4sc" path="res://Scenes/Items/Ammo/pistol_ammo.tscn" id="7_o06y3"]
[ext_resource type="PackedScene" uid="uid://cb05x24r4r8im" path="res://Scenes/enemy.tscn" id="8_k7acu"]
[ext_resource type="PackedScene" uid="uid://bs4u1fwqmjcdq" path="res://Scenes/Items/Ammo/rifle_ammo.tscn" id="9_5v1tr"]
[ext_resource type="PackedScene" uid="uid://cs2axhvg7t0k6" path="res://Scenes/Items/Ammo/shotgun_ammo.tscn" id="10_0fj1v"]
[ext_resource type="PackedScene" uid="uid://b65x4o42cd2d6" path="res://Scenes/Items/medkit.tscn" id="12_7yui6"]
[ext_resource type="PackedScene" uid="uid://bx5h70fy0b18o" path="res://Scenes/Items/Guns/shotgun.tscn" id="13_c5t2i"]
[ext_resource type="PackedScene" uid="uid://dig2vgrs53m37" path="res://Scenes/Items/Guns/sniper_rifle.tscn" id="15_hgpy0"]
[ext_resource type="PackedScene" uid="uid://cgtukpis1lq0a" path="res://Scenes/Items/Guns/assault_rifle.tscn" id="16_t2t4p"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_k7acu"]

[sub_resource type="Sky" id="Sky_5v1tr"]
sky_material = SubResource("ProceduralSkyMaterial_k7acu")

[sub_resource type="Environment" id="Environment_fo5ed"]
background_mode = 2
background_color = Color(1, 1, 1, 1)
sky = SubResource("Sky_5v1tr")
ambient_light_color = Color(1, 1, 1, 1)
fog_enabled = true
fog_sky_affect = 0.5

[sub_resource type="NavigationMesh" id="NavigationMesh_fo5ed"]
vertices = PackedVector3Array(-1.25, 0.4347, -11, 0.5, 0.4347, -11.25, 0.25, 0.4347, -49.5, -49.5, 0.4347, -49.5, -49.5, 0.4347, -9.75, -1.25, 0.4347, -9.5, 1.25, 0.4347, -11.25, 1.5, 0.4347, -49.5, 3, 0.4347, -11, 49.5, 0.4347, -9, 49.5, 0.4347, -49.5, 3, 0.4347, -9, -0.25, 4.6847, -10.25, -0.25, 4.6847, -8, 2, 4.6847, -8, 2, 4.6847, -10.25, -11.5, 0.4347, 8.25, -8, 0.4347, 8.25, -1.25, 0.4347, -7.5, -49.5, 0.4347, 9.75, -11.75, 0.4347, 10, 2.75, 0.4347, -7, -0.75, 0.4347, -7, -7.5, 0.4347, 8.75, -7.5, 0.4347, 12.25, -9.5, 0.4347, 49.5, 49.5, 0.4347, 49.5, -9.5, 0.4347, 12.5, -10.75, 3.4347, 9.25, -10.75, 3.4347, 11.5, -8.5, 3.4347, 11.5, -8.5, 3.4347, 9.25, -10.5, 0.4347, 9.5, -10.5, 0.4347, 11.25, -8.75, 0.4347, 11.25, -8.75, 0.4347, 9.5, -49.5, 0.4347, 11, -11.75, 0.4347, 10.75, -11.5, 0.4347, 12.5, -49.5, 0.4347, 49.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(0, 5, 4), PackedInt32Array(1, 2, 6), PackedInt32Array(6, 2, 7), PackedInt32Array(6, 7, 8), PackedInt32Array(8, 7, 10), PackedInt32Array(8, 10, 9), PackedInt32Array(9, 11, 8), PackedInt32Array(15, 14, 12), PackedInt32Array(12, 14, 13), PackedInt32Array(18, 17, 16), PackedInt32Array(18, 16, 5), PackedInt32Array(5, 16, 19), PackedInt32Array(5, 19, 4), PackedInt32Array(16, 20, 19), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 24), PackedInt32Array(24, 21, 25), PackedInt32Array(25, 21, 9), PackedInt32Array(25, 9, 26), PackedInt32Array(25, 27, 24), PackedInt32Array(21, 11, 9), PackedInt32Array(18, 22, 17), PackedInt32Array(17, 22, 23), PackedInt32Array(31, 30, 28), PackedInt32Array(28, 30, 29), PackedInt32Array(35, 34, 32), PackedInt32Array(32, 34, 33), PackedInt32Array(37, 36, 20), PackedInt32Array(20, 36, 19), PackedInt32Array(38, 27, 25), PackedInt32Array(37, 38, 36), PackedInt32Array(36, 38, 39), PackedInt32Array(39, 38, 25)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fo5ed"]
albedo_texture = ExtResource("5_5v1tr")
uv1_triplanar = true

[sub_resource type="PlaneMesh" id="PlaneMesh_5ukr8"]
size = Vector2(100, 100)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_fo5ed"]
data = PackedVector3Array(50, 0, 50, -50, 0, 50, 50, 0, -50, -50, 0, 50, -50, 0, -50, 50, 0, -50)

[sub_resource type="BoxMesh" id="BoxMesh_fo5ed"]
size = Vector3(3, 3, 3)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_5ukr8"]
data = PackedVector3Array(-1.5, 1.5, 1.5, 1.5, 1.5, 1.5, -1.5, -1.5, 1.5, 1.5, 1.5, 1.5, 1.5, -1.5, 1.5, -1.5, -1.5, 1.5, 1.5, 1.5, -1.5, -1.5, 1.5, -1.5, 1.5, -1.5, -1.5, -1.5, 1.5, -1.5, -1.5, -1.5, -1.5, 1.5, -1.5, -1.5, 1.5, 1.5, 1.5, 1.5, 1.5, -1.5, 1.5, -1.5, 1.5, 1.5, 1.5, -1.5, 1.5, -1.5, -1.5, 1.5, -1.5, 1.5, -1.5, 1.5, -1.5, -1.5, 1.5, 1.5, -1.5, -1.5, -1.5, -1.5, 1.5, 1.5, -1.5, -1.5, 1.5, -1.5, -1.5, -1.5, 1.5, 1.5, 1.5, -1.5, 1.5, 1.5, 1.5, 1.5, -1.5, -1.5, 1.5, 1.5, -1.5, 1.5, -1.5, 1.5, 1.5, -1.5, -1.5, -1.5, 1.5, 1.5, -1.5, 1.5, -1.5, -1.5, -1.5, 1.5, -1.5, 1.5, 1.5, -1.5, -1.5, -1.5, -1.5, -1.5)

[sub_resource type="Curve3D" id="Curve3D_5ukr8"]
closed = true
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, -5, 0, 0),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[node name="World" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_fo5ed")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(1, 0, 0, 0, -0.589619, 0.807682, 0, -0.807682, -0.589619, 0, 0, 0)
shadow_enabled = true
shadow_normal_bias = 0.0
shadow_blur = 10.0
directional_shadow_max_distance = 0.4

[node name="CharacterBody3D" parent="." instance=ExtResource("2_evir0")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.576142, -12.917)

[node name="Hitbox" parent="CharacterBody3D" index="1" node_paths=PackedStringArray("hp_bar")]
hp_bar = NodePath("../../CanvasLayer/ProgressBar")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
script = ExtResource("2_adtv2")

[node name="Crosshair" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
metadata/_edit_use_anchors_ = true

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/Crosshair"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -32.0
offset_top = -32.0
offset_right = 32.0
offset_bottom = 32.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_rmtha")
metadata/_edit_use_anchors_ = true

[node name="ProgressBar" type="ProgressBar" parent="CanvasLayer"]
offset_left = 16.0
offset_top = 16.0
offset_right = 247.0
offset_bottom = 43.0
max_value = 1.0
value = 1.0

[node name="TextureRect" type="TextureRect" parent="CanvasLayer"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -6.0
offset_top = -6.0
offset_right = 6.0
offset_bottom = 6.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("4_k7acu")

[node name="HitEffect" type="Control" parent="CanvasLayer"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/HitEffect"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(1, 0, 0, 0.427451)

[node name="Scope" type="TextureRect" parent="CanvasLayer"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -400.0
offset_top = -400.0
offset_right = 400.0
offset_bottom = 400.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("5_ikia7")

[node name="MagsLeft" type="Label" parent="CanvasLayer"]
offset_left = 16.0
offset_top = 55.0
offset_right = 66.0
offset_bottom = 78.0
text = "Mags: "

[node name="MedkitsLeft" type="Label" parent="CanvasLayer"]
offset_left = 16.0
offset_top = 86.0
offset_right = 87.0
offset_bottom = 109.0
text = "Medkits: 0"

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_fo5ed")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D"]
material_override = SubResource("StandardMaterial3D_fo5ed")
mesh = SubResource("PlaneMesh_5ukr8")
skeleton = NodePath("")
metadata/_edit_group_ = true

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_fo5ed")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.72575, 1.4347, 10.4029)
mesh = SubResource("BoxMesh_fo5ed")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/MeshInstance3D2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/MeshInstance3D2/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_5ukr8")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.884544, 2.8694, -9.18057)
mesh = SubResource("BoxMesh_fo5ed")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/MeshInstance3D3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/MeshInstance3D3/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_5ukr8")

[node name="Ladder" parent="NavigationRegion3D" instance=ExtResource("7_e0ngr")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 1.42392, -4.76837e-07, -11.0106)

[node name="NoiseController" parent="." instance=ExtResource("6_5ukr8")]

[node name="Path3D" type="Path3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 7.804)
curve = SubResource("Curve3D_5ukr8")

[node name="PathFollow3D" type="PathFollow3D" parent="Path3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -5, 1, 0)
progress = 10.0
v_offset = 1.0

[node name="Enemy" parent="Path3D" instance=ExtResource("8_k7acu")]
transform = Transform3D(-0.043968, 0, -0.999033, 0, 1, 0, 0.999033, 0, -0.043968, 0, 1, 0)

[node name="PistolAmmo" parent="." instance=ExtResource("7_o06y3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.09968, 0.0500005, -11.4456)

[node name="PistolAmmo2" parent="." instance=ExtResource("7_o06y3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.562849, 0.0499995, -11.0536)

[node name="PistolAmmo3" parent="." instance=ExtResource("7_o06y3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.27705, 0.05, -11.5602)

[node name="RifleAmmo" parent="." instance=ExtResource("9_5v1tr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.768289, 0.0500002, -11.8201)

[node name="RifleAmmo2" parent="." instance=ExtResource("9_5v1tr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.624185, 0.0500005, -11.5758)

[node name="RifleAmmo3" parent="." instance=ExtResource("9_5v1tr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.52644, 0.05, -12.0423)

[node name="ShotgunAmmo" parent="." instance=ExtResource("10_0fj1v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.838726, 0.05, -12.2306)

[node name="ShotgunAmmo2" parent="." instance=ExtResource("10_0fj1v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.10582, 0.05, -11.9609)

[node name="Medkit" parent="." instance=ExtResource("12_7yui6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.16732, 0.05, -11.9954)

[node name="Medkit2" parent="." instance=ExtResource("12_7yui6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.184721, 0.0499998, -12.4659)

[node name="Shotgun" parent="." instance=ExtResource("13_c5t2i")]
transform = Transform3D(0.918446, 0.395546, 0, -0.395546, 0.918446, 0, 0, 0, 1, 0.260632, 0.632082, -11.6619)

[node name="SniperRifle" parent="." instance=ExtResource("15_hgpy0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.172864, 0.15757, -10.8266)

[node name="AssaultRifle" parent="." instance=ExtResource("16_t2t4p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.468276, 0.190255, -11.0171)

[editable path="CharacterBody3D"]
[editable path="CharacterBody3D/CameraAnchor/Camera3D/SniperRifle/Gun"]
